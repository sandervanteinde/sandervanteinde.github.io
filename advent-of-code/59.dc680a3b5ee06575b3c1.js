(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{DcO0:function(e,r,t){"use strict";t.r(r),t.d(r,"daySixteenPartTwo",function(){return o});var n=t("2tT0");function o(e){const r=/([a-z ]+): (\d+)-(\d+) or (\d+)-(\d+)/;class t{constructor(e){const t=r.exec(e);if(!t)throw new Error("Unknown ticket rule: "+e);const[,n,o,s,a,i]=t;this.name=n,this._validNumbers=new Set([...this.validNumbersForRange([Number(o),Number(s)]),...this.validNumbersForRange([Number(a),Number(i)])])}validNumbers(){return Array.from(this._validNumbers.values())}isInRange(e){return this._validNumbers.has(e)}validNumbersForRange([e,r]){return Array.from({length:r-e+1}).map((r,t)=>t+e)}}function o(e){const r=e.split(",").map(Number);if(r.some(Number.isNaN))throw new Error("Invalid ticket value found");return r}const s=new n.a(e),[a,[,i],[,...u]]=s.readEntriesSeperatedByWhiteline(),l=o(i),c=a.map(e=>new t(e)),m=c.reduce((e,r)=>(r.validNumbers().forEach(r=>e.add(r)),e),new Set),d=[i,...u].map(o).filter(e=>e.every(e=>m.has(e))),f=new Map;for(const n of c)for(let e=0;e<c.length;e++)if(d.every(r=>n.isInRange(r[e]))){let r=f.get(n);r||f.set(n,r=[]),r.push(e)}const h=new Map;if(f.size!==c.length)throw new Error("Failed to map all column possibilities");let w=!0;for(;w;){w=!1;for(const[e,r]of Array.from(f.entries()))if(1===r.length){const t=r[0];h.set(e,t),Array.from(f.values()).forEach(e=>{const r=e.indexOf(t);-1!==r&&e.splice(r,1)}),w=!0}}if(h.size!==c.length)throw new Error("Failed to map all columns");for(const n of Array.from(h.keys()))n.name.startsWith("departure")||h.delete(n);return Array.from(h.values()).reduce((e,r)=>e*l[r],1)}}}]);